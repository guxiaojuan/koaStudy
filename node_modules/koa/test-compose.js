const compose = require('koa-compose');

async function fun1(context, next) {
	console.log("middleware1-----------------");
	await next()
	console.log("-------next1---------")
}


async function fun2(context, next) {
	console.log("middleware2----------------");
	// console.log(context)
  // console.log(next)
  await next();
  console.log("--------------next2------")

	// setTimeout(() => {
  //   next();
	// 	console.log("--------------next2------")
	// }, 1000)
}

async function fun3(context, next) {
	console.log("middleware3------------");
  await next()
  console.log("-------next3-----------")
}

fun1('a', function(){console.log('fun1')})
fun2('a', function(){console.log('fun2')})
fun3('a', function(){console.log('fun3')})

// const run = compose([fun1, fun2, fun3]);
//
// run()

// run('aaa')

// run('aaa', function() {
//   console.log('all done')
// })
